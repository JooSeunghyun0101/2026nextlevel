{
  "permissions": {
    "allow": [
      "Bash(pip show:*)",
      "Bash(python:*)",
      "Bash(where:*)",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" -c \"import cv2; print\\(''OpenCV:'', cv2.__version__\\)\")",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" -m pip install opencv-python pillow --quiet)",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" \"C:\\\\Users\\\\apro\\\\2026intro2\\\\crop_photos.py\")",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" -c \"import cv2; img = cv2.imread\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\cropped\\\\0201013_cropped.png''\\); print\\(f''Size: {img.shape[1]}x{img.shape[0]} \\(width x height\\)''\\)\")",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" -c \"\nimport cv2\nimg = cv2.imread\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\1310155.png''\\)\nh, w = img.shape[:2]\nprint\\(f''Image size: {w}x{h}''\\)\nprint\\(f''55% height: {int\\(h*0.55\\)}''\\)\n\")",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" -c \"\nimport cv2\n\nimg = cv2.imread\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\1310155.png''\\)\nh, w = img.shape[:2]\ngray = cv2.cvtColor\\(img, cv2.COLOR_BGR2GRAY\\)\ngray = cv2.equalizeHist\\(gray\\)\n\n# 상단 40%에서만 찾기\nsearch_h = int\\(h * 0.40\\)\ngray_upper = gray[0:search_h, :]\n\nface_cascade = cv2.CascadeClassifier\\(cv2.data.haarcascades + ''haarcascade_frontalface_alt2.xml''\\)\nfaces = face_cascade.detectMultiScale\\(gray_upper, scaleFactor=1.05, minNeighbors=3, minSize=\\(50, 50\\)\\)\n\nprint\\(f''Found {len\\(faces\\)} faces in upper 40%''\\)\nfor \\(x, y, fw, fh\\) in faces:\n    print\\(f''  Face at \\({x}, {y}\\), size {fw}x{fh}''\\)\n\n# 가장 큰 얼굴 선택\nif len\\(faces\\) > 0:\n    faces = sorted\\(faces, key=lambda f: f[2]*f[3], reverse=True\\)\n    fx, fy, fw, fh = faces[0]\n    \n    # 크롭 계산\n    face_cx = fx + fw // 2\n    face_cy = fy + fh // 2\n    \n    crop_h = int\\(fh * 3.2\\)\n    crop_h = max\\(crop_h, 400\\)\n    crop_w = int\\(crop_h * 3 / 4\\)\n    \n    face_top = fy\n    y1 = int\\(face_top - crop_h * 0.18\\)\n    y1 = max\\(0, y1\\)\n    y2 = y1 + crop_h\n    \n    x1 = int\\(face_cx - crop_w // 2\\)\n    x1 = max\\(0, x1\\)\n    x2 = x1 + crop_w\n    \n    if x2 > w:\n        x2 = w\n        x1 = x2 - crop_w\n    if y2 > h:\n        y2 = h\n        y1 = y2 - crop_h\n    \n    cropped = img[y1:y2, x1:x2]\n    resized = cv2.resize\\(cropped, \\(450, 600\\), interpolation=cv2.INTER_LANCZOS4\\)\n    cv2.imwrite\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\cropped\\\\1310155_cropped.png'', resized\\)\n    print\\(''Saved 1310155_cropped.png''\\)\nelse:\n    print\\(''No face found''\\)\n\")",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" -c:*)",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" -c \"\nimport cv2\n\nimg = cv2.imread\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\1310155.png''\\)\nh, w = img.shape[:2]\n\n# frontal_alt에서 찾은 가장 큰 얼굴: [242 104 250 250]\nfx, fy, fw, fh = 242, 104, 250, 250\n\nface_cx = fx + fw // 2  # 367\nface_cy = fy + fh // 2  # 229\n\n# 크롭 계산 \\(얼굴 높이의 2.5배\\)\ncrop_h = int\\(fh * 2.5\\)\ncrop_h = max\\(crop_h, 500\\)\ncrop_w = int\\(crop_h * 3 / 4\\)\n\n# 얼굴 상단이 크롭의 20% 지점에 오도록\ny1 = int\\(fy - crop_h * 0.20\\)\ny1 = max\\(0, y1\\)\ny2 = y1 + crop_h\nif y2 > h:\n    y2 = h\n    y1 = y2 - crop_h\n\nx1 = int\\(face_cx - crop_w // 2\\)\nx1 = max\\(0, x1\\)\nx2 = x1 + crop_w\nif x2 > w:\n    x2 = w\n    x1 = max\\(0, x2 - crop_w\\)\n\nprint\\(f''Crop region: \\({x1}, {y1}\\) to \\({x2}, {y2}\\)''\\)\nprint\\(f''Crop size: {x2-x1}x{y2-y1}''\\)\n\ncropped = img[y1:y2, x1:x2]\nresized = cv2.resize\\(cropped, \\(450, 600\\), interpolation=cv2.INTER_LANCZOS4\\)\ncv2.imwrite\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\cropped\\\\1310155_cropped.png'', resized\\)\nprint\\(''Saved!''\\)\n\")",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" -c \"\nimport cv2\n\n# 1601376 - 얼굴 위치 직접 찾기\nimg = cv2.imread\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\1601376.jpg''\\)\nh, w = img.shape[:2]\nprint\\(f''1601376: {w}x{h}''\\)\n\ngray = cv2.cvtColor\\(img, cv2.COLOR_BGR2GRAY\\)\ngray = cv2.equalizeHist\\(gray\\)\n\n# 이미지 중앙 부분에서만 찾기 \\(사람이 중앙에 있음\\)\nmid_x = w // 2\nleft = max\\(0, mid_x - 300\\)\nright = min\\(w, mid_x + 300\\)\ngray_center = gray[0:int\\(h*0.4\\), left:right]\n\ncascades = [\n    cv2.data.haarcascades + ''haarcascade_frontalface_alt.xml'',\n    cv2.data.haarcascades + ''haarcascade_frontalface_alt2.xml'',\n    cv2.data.haarcascades + ''haarcascade_frontalface_default.xml'',\n]\n\nfor cas_path in cascades:\n    cascade = cv2.CascadeClassifier\\(cas_path\\)\n    faces = cascade.detectMultiScale\\(gray_center, scaleFactor=1.02, minNeighbors=2, minSize=\\(40, 40\\)\\)\n    if len\\(faces\\) > 0:\n        for \\(fx, fy, fw, fh\\) in faces:\n            # 원래 좌표로 변환\n            real_x = fx + left\n            print\\(f''  Found face at \\({real_x}, {fy}\\), size {fw}x{fh}''\\)\n\")",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" -c \"\nimport cv2\n\n# 1601376 - 가장 큰 얼굴 사용 \\(308, 211, 136, 136\\)\nimg = cv2.imread\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\1601376.jpg''\\)\nh, w = img.shape[:2]\n\nfx, fy, fw, fh = 308, 211, 136, 136\nface_cx = fx + fw // 2  # 376\n\ncrop_h = int\\(fh * 2.5\\)  # 340\ncrop_h = max\\(crop_h, 400\\)\ncrop_w = int\\(crop_h * 3 / 4\\)  # 300\n\ny1 = int\\(fy - crop_h * 0.20\\)\ny1 = max\\(0, y1\\)\ny2 = y1 + crop_h\n\nx1 = int\\(face_cx - crop_w // 2\\)\nx1 = max\\(0, x1\\)\nx2 = x1 + crop_w\n\nif x2 > w:\n    x2 = w\n    x1 = x2 - crop_w\nif y2 > h:\n    y2 = h\n    y1 = y2 - crop_h\n\nprint\\(f''Crop: \\({x1},{y1}\\) to \\({x2},{y2}\\)''\\)\ncropped = img[y1:y2, x1:x2]\nresized = cv2.resize\\(cropped, \\(450, 600\\), interpolation=cv2.INTER_LANCZOS4\\)\ncv2.imwrite\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\cropped\\\\1601376_cropped.jpg'', resized\\)\nprint\\(''1601376 saved!''\\)\n\n# 1504248\nimg2 = cv2.imread\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\1504248.jpg''\\)\nh2, w2 = img2.shape[:2]\nprint\\(f''1504248: {w2}x{h2}''\\)\n\ngray2 = cv2.cvtColor\\(img2, cv2.COLOR_BGR2GRAY\\)\ngray2 = cv2.equalizeHist\\(gray2\\)\n\n# 중앙 영역에서 찾기\nmid_x2 = w2 // 2\nleft2 = max\\(0, mid_x2 - 250\\)\nright2 = min\\(w2, mid_x2 + 250\\)\ngray_center2 = gray2[0:int\\(h2*0.35\\), left2:right2]\n\ncascade = cv2.CascadeClassifier\\(cv2.data.haarcascades + ''haarcascade_frontalface_alt.xml''\\)\nfaces2 = cascade.detectMultiScale\\(gray_center2, scaleFactor=1.02, minNeighbors=3, minSize=\\(50, 50\\)\\)\n\nif len\\(faces2\\) > 0:\n    faces2 = sorted\\(faces2, key=lambda f: f[2]*f[3], reverse=True\\)\n    fx2, fy2, fw2, fh2 = faces2[0]\n    fx2 += left2  # 원래 좌표로 변환\n    print\\(f''Face at \\({fx2}, {fy2}\\), size {fw2}x{fh2}''\\)\n    \n    face_cx2 = fx2 + fw2 // 2\n    \n    crop_h2 = int\\(fh2 * 2.5\\)\n    crop_h2 = max\\(crop_h2, 400\\)\n    crop_w2 = int\\(crop_h2 * 3 / 4\\)\n    \n    y1_2 = int\\(fy2 - crop_h2 * 0.20\\)\n    y1_2 = max\\(0, y1_2\\)\n    y2_2 = y1_2 + crop_h2\n    \n    x1_2 = int\\(face_cx2 - crop_w2 // 2\\)\n    x1_2 = max\\(0, x1_2\\)\n    x2_2 = x1_2 + crop_w2\n    \n    if x2_2 > w2:\n        x2_2 = w2\n        x1_2 = x2_2 - crop_w2\n    if y2_2 > h2:\n        y2_2 = h2\n        y1_2 = y2_2 - crop_h2\n    \n    cropped2 = img2[y1_2:y2_2, x1_2:x2_2]\n    resized2 = cv2.resize\\(cropped2, \\(450, 600\\), interpolation=cv2.INTER_LANCZOS4\\)\n    cv2.imwrite\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\cropped\\\\1504248_cropped.jpg'', resized2\\)\n    print\\(''1504248 saved!''\\)\nelse:\n    print\\(''No face found for 1504248''\\)\n\")",
      "Bash(\"C:\\\\Users\\\\apro\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python314\\\\python.exe\" -c \"\nimport cv2\n\nimg = cv2.imread\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\1811122.png''\\)\nh, w = img.shape[:2]\nprint\\(f''Image: {w}x{h}''\\)\n\ngray = cv2.cvtColor\\(img, cv2.COLOR_BGR2GRAY\\)\ngray = cv2.equalizeHist\\(gray\\)\n\n# 상단 40%에서 얼굴 찾기\nsearch_h = int\\(h * 0.40\\)\ngray_upper = gray[0:search_h, :]\n\ncascade = cv2.CascadeClassifier\\(cv2.data.haarcascades + ''haarcascade_frontalface_alt.xml''\\)\nfaces = cascade.detectMultiScale\\(gray_upper, scaleFactor=1.02, minNeighbors=3, minSize=\\(50, 50\\)\\)\n\nif len\\(faces\\) > 0:\n    faces = sorted\\(faces, key=lambda f: f[2]*f[3], reverse=True\\)\n    fx, fy, fw, fh = faces[0]\n    print\\(f''Face at \\({fx}, {fy}\\), size {fw}x{fh}''\\)\n    \n    face_cx = fx + fw // 2\n    \n    # 크롭 \\(머리 위 여백 더 많이 - 30%\\)\n    crop_h = int\\(fh * 3.0\\)\n    crop_h = max\\(crop_h, 450\\)\n    crop_w = int\\(crop_h * 3 / 4\\)\n    \n    # 머리 위 여백 30% 확보\n    y1 = int\\(fy - crop_h * 0.30\\)\n    y1 = max\\(0, y1\\)\n    y2 = y1 + crop_h\n    \n    if y2 > h:\n        y2 = h\n        y1 = max\\(0, y2 - crop_h\\)\n    \n    x1 = int\\(face_cx - crop_w // 2\\)\n    x1 = max\\(0, x1\\)\n    x2 = x1 + crop_w\n    \n    if x2 > w:\n        x2 = w\n        x1 = max\\(0, x2 - crop_w\\)\n    \n    print\\(f''Crop: \\({x1},{y1}\\) to \\({x2},{y2}\\)''\\)\n    \n    cropped = img[y1:y2, x1:x2]\n    resized = cv2.resize\\(cropped, \\(450, 600\\), interpolation=cv2.INTER_LANCZOS4\\)\n    cv2.imwrite\\(r''C:\\\\Users\\\\apro\\\\2026intro2\\\\pic\\\\cropped\\\\1811122_cropped.png'', resized\\)\n    print\\(''Saved!''\\)\nelse:\n    print\\(''No face found''\\)\n\")"
    ]
  }
}
